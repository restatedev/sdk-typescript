{
 "n1": {
    "image": "${RESTATE_CONTAINER_IMAGE}",
    "ports": [8080, 9070, 5122],
    "pull": "never",
    "env": {
      "RESTATE_LOG_FILTER": "restate=debug",
      "RESTATE_LOG_FORMAT": "json",
      "RESTATE_ROLES": "[worker,log-server,admin,metadata-server]",
      "RESTATE_CLUSTER_NAME": "foobar",
      "RESTATE_BIFROST__DEFAULT_PROVIDER": "replicated",
      "RESTATE_BIFROST__REPLICATED_LOGLET__DEFAULT_LOG_REPLICATION": "2",
      "RESTATE_METADATA_SERVER__TYPE": "replicated",
      "RESTATE_AUTO_PROVISION": "true",
      "RESTATE_ADVERTISED_ADDRESS": "http://n1:5122",
      "DO_NOT_TRACK": "true",
			"RESTATE_WORKER__SNAPSHOTS__AWS_ALLOW_HTTP" : "true",    
			"RESTATE_WORKER__SNAPSHOTS__AWS_REGION" : "local",
			"RESTATE_WORKER__SNAPSHOTS__AWS_ENDPOINT_URL" : "http://minio:9000", 
			"RESTATE_WORKER__SNAPSHOTS__AWS_ACCESS_KEY_ID" : "minioadmin", 
			"RESTATE_WORKER__SNAPSHOTS__AWS_SECRET_ACCESS_KEY" : "minioadmin",
			"RESTATE_WORKER__SNAPSHOTS__DESTINATION" : "s3://restate/foobar",
			"RESTATE_WORKER__SNAPSHOTS__SNAPSHOT_INTERVAL_NUM_RECORDS" : "10000",
			"RESTATE_ADMIN__LOG_TRIM_CHECK_INTERVAL" : "10s",
			"RESTATE_WORKER__INVOKER__CONCURRENT_INVOCATIONS_LIMIT" : "1024",
			"RESTATE_WORKER__INVOKER__INACTIVITY_TIMEOUT" : "2sec"
    }
  },
  "n2": {
    "image": "${RESTATE_CONTAINER_IMAGE}",
    "ports": [8080],
    "pull": "never",
    "env": {
      "RESTATE_LOG_FILTER": "restate=debug",
      "RESTATE_LOG_FORMAT": "json",
      "RESTATE_ROLES": "[worker,admin,log-server,metadata-server]",
      "RESTATE_CLUSTER_NAME": "foobar",
      "RESTATE_BIFROST__DEFAULT_PROVIDER": "replicated",
      "RESTATE_BIFROST__REPLICATED_LOGLET__DEFAULT_LOG_REPLICATION": "2",
      "RESTATE_METADATA_SERVER__TYPE": "replicated",
      "RESTATE_AUTO_PROVISION": "false",
      "RESTATE_METADATA_CLIENT__ADDRESSES": "[http://n1:5122]",
      "RESTATE_ADVERTISED_ADDRESS": "http://n2:5122",
      "DO_NOT_TRACK": "true",
			"RESTATE_WORKER__SNAPSHOTS__DESTINATION" : "s3://restate/foobar",
			"RESTATE_WORKER__SNAPSHOTS__SNAPSHOT_INTERVAL_NUM_RECORDS" : "10000",
			"RESTATE_ADMIN__LOG_TRIM_CHECK_INTERVAL" : "10s",
			"RESTATE_WORKER__SNAPSHOTS__AWS_ALLOW_HTTP" : "true",
			"RESTATE_WORKER__SNAPSHOTS__AWS_REGION" : "local",
			"RESTATE_WORKER__SNAPSHOTS__AWS_ENDPOINT_URL" : "http://minio:9000", 
			"RESTATE_WORKER__SNAPSHOTS__AWS_ACCESS_KEY_ID" : "minioadmin", 
			"RESTATE_WORKER__SNAPSHOTS__AWS_SECRET_ACCESS_KEY" : "minioadmin",
			"RESTATE_WORKER__SNAPSHOTS__DESTINATION" : "s3://restate/foobar",
			"RESTATE_WORKER__INVOKER__CONCURRENT_INVOCATIONS_LIMIT" : "1024",
			"RESTATE_WORKER__INVOKER__INACTIVITY_TIMEOUT" : "2sec"
		}
  },
  "n3": {
    "image": "${RESTATE_CONTAINER_IMAGE}",
    "ports": [8080],
    "pull": "never",
    "env": {
      "RESTATE_LOG_FILTER": "restate=debug",
      "RESTATE_LOG_FORMAT": "json",
      "RESTATE_ROLES": "[worker,admin,log-server,metadata-server]",
      "RESTATE_CLUSTER_NAME": "foobar",
      "RESTATE_BIFROST__DEFAULT_PROVIDER": "replicated",
      "RESTATE_BIFROST__REPLICATED_LOGLET__DEFAULT_LOG_REPLICATION": "2",
      "RESTATE_METADATA_SERVER__TYPE": "replicated",
      "RESTATE_AUTO_PROVISION": "false",
      "RESTATE_METADATA_CLIENT__ADDRESSES": "[http://n1:5122]",
      "RESTATE_ADVERTISED_ADDRESS": "http://n3:5122",
      "DO_NOT_TRACK": "true",
			"RESTATE_WORKER__SNAPSHOTS__DESTINATION" : "s3://restate/foobar",
			"RESTATE_WORKER__SNAPSHOTS__SNAPSHOT_INTERVAL_NUM_RECORDS" : "10000",
			"RESTATE_ADMIN__LOG_TRIM_CHECK_INTERVAL" : "10s",
			"RESTATE_WORKER__SNAPSHOTS__DESTINATION" : "s3://restate/foobar",
			"RESTATE_WORKER__SNAPSHOTS__SNAPSHOT_INTERVAL_NUM_RECORDS" : "10000",
			"RESTATE_ADMIN__LOG_TRIM_CHECK_INTERVAL" : "10s",
			"RESTATE_WORKER__SNAPSHOTS__AWS_ALLOW_HTTP" : "true",
			"RESTATE_WORKER__SNAPSHOTS__AWS_REGION" : "local",
			"RESTATE_WORKER__SNAPSHOTS__AWS_ENDPOINT_URL" : "http://minio:9000", 
			"RESTATE_WORKER__SNAPSHOTS__AWS_ACCESS_KEY_ID" : "minioadmin", 
			"RESTATE_WORKER__SNAPSHOTS__AWS_SECRET_ACCESS_KEY" : "minioadmin",
			"RESTATE_WORKER__SNAPSHOTS__DESTINATION" : "s3://restate/foobar",
			"RESTATE_WORKER__INVOKER__CONCURRENT_INVOCATIONS_LIMIT" : "1024",
			"RESTATE_WORKER__INVOKER__INACTIVITY_TIMEOUT" : "2sec"
		}
  },
  "interpreter_zero": {
    "image": "${SERVICES_CONTAINER_IMAGE}",
    "ports": [9000],
    "pull": "never",
    "env": {
      "PORT": "9000",
      "RESTATE_LOGGING": "ERROR",
      "NODE_ENV": "production",
			"UV_THREADPOOL_SIZE" : "8",
			"NODE_OPTS" : "--max-old-space-size=4096",
      "SERVICES": "ObjectInterpreterL0"
    }
  },
  "interpreter_one": {
    "image": "${SERVICES_CONTAINER_IMAGE}",
    "ports": [9001],
    "pull": "never",
    "env": {
      "PORT": "9001",
      "RESTATE_LOGGING": "ERROR",
      "NODE_ENV": "production",
			"UV_THREADPOOL_SIZE" : "8",
			"NODE_OPTS" : "--max-old-space-size=4096",
      "SERVICES": "ObjectInterpreterL1"
    }
  },
  "interpreter_two": {
    "image": "${SERVICES_CONTAINER_IMAGE}",
    "ports": [9002],
    "pull": "never",
    "env": {
      "PORT": "9002",
      "RESTATE_LOGGING": "ERROR",
      "NODE_ENV": "production",
			"UV_THREADPOOL_SIZE" : "8",
			"NODE_OPTS" : "--max-old-space-size=4096",
      "SERVICES": "ObjectInterpreterL2"
    }
  },
  "services": {
    "image": "${SERVICES_CONTAINER_IMAGE}",
    "ports": [9003],
    "pull": "never",
    "env": {
      "PORT": "9003",
      "RESTATE_LOGGING": "ERROR",
      "NODE_ENV": "production",
			"UV_THREADPOOL_SIZE" : "8",
			"NODE_OPTS" : "--max-old-space-size=4096",
      "SERVICES": "ServiceInterpreterHelper"
    }
  },
	"minio" : {
		"image" : "quay.io/minio/minio",
		"pull" : "always",
		"ports" : [],
		"cmd" : ["-c", "mkdir -p /data/restate && minio server /data"],
		"entryPoint" : "/bin/sh", 
		"env" : {
		}
	}
}
